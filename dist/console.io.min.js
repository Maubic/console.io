/**
 * Name: console.io
 * Version: 0.2.0
 * Description: Javascript Remote Web Console
 * Website: http://nkashyap.github.io/console.io/
 * Author: Nisheeth Kashyap
 * Email: nisheeth.k.kashyap@gmail.com
 * Date: 2013-08-29
*/

var ConsoleIO="undefined"==typeof module?{}:module.exports;!function(){!function(a,b){var c=a.util={},d=!1,e=[];c.queryParams=function f(){for(var a,b,c=0,d={},e=Array.prototype.slice.call(document.scripts||document.getElementsByName("script"));a=e[c++];)if(b=(a.src?a.src:a.getAttribute("src")||"").toLowerCase(),-1!==b.indexOf("console.io.js")){d.secure=b.indexOf("https")>-1;var g=b.indexOf("?");if(g>-1)for(var h,i=0,f=b.substring(g+1,b.length).split("&");h=f[i++];)h=h.split("="),d[h[0]]=h[1];if(!d.url){var j=new RegExp("^(?:f|ht)tp(?:s)?://([^/]+)","im"),k=g>-1?b.substring(0,g):b;d.url=(d.secure?"https://":"http://")+k.match(j)[1].toString()}d.base||(d.base=b.indexOf("/console.io/")>-1?"console.io/":"");break}if(location){var l=location.origin?location.origin:location.protocol+"//"+location.hostname,m=location.hash?location.hash:location.href.replace(l+location.pathname,"");if(m&&m.length>0)for(var n,o=0,p=m.split("#"),q=p.length;q>o;)if(n=p[o++]){var r=n.split("=");d[r[0]]=r[1]}}return d},c.checkFile=function(a){var b,c,d,e,f=a.indexOf(".js")>-1?"script":a.indexOf(".css")>-1?"link":null,g=0;if(f)for(d="script"===f?"src":"href",b=document.getElementsByTagName(f);c=b[g++];)if(e=c.getAttribute(d)||"",e.indexOf(a)>-1)return!0;return!1},c.removeFile=function(a){var b,d,e=a.indexOf(".js")>-1?"script":a.indexOf(".css")>-1?"link":null;e&&(d="script"===e?"src":"href",b=document.getElementsByTagName(e),c.forEach(c.toArray(b),function(b){var c=b.getAttribute(d)||"";c.indexOf(a)>-1&&b.parentNode.removeChild(b)}))},c.requireCSS=function(a,d){if(c.checkFile(a))return d&&setTimeout(function(){d(a)},10),!1;var e=document.styleSheets.length,f=document.createElement("link"),g=document.getElementsByTagName("head")[0];if(d)var h=b.setInterval(function(){document.styleSheets.length>e&&(d(a),b.clearInterval(h))},10);f.type="text/css",f.rel="stylesheet",f.media="all",f.href=a,g.appendChild(f)},c.requireScript=function(a,d){function e(){g.removeEventListener?(g.removeEventListener("load",e,!1),d(a)):g.attachEvent&&("complete"===g.readyState||"loaded"===g.readyState)&&(g.detachEvent("onreadystatechange",e),d(a))}function f(){g.removeEventListener("error",f,!1)}if(c.checkFile(a))return setTimeout(function(){d(a)},10),!1;var g=document.createElement("script"),h=document.getElementsByTagName("head")[0];g.type="text/javascript",g.charset="utf-8",g.async=!0,("complete"===g.readyState||"loaded"===g.readyState)&&setTimeout(function(){d(a)},1),g.addEventListener?(g.addEventListener("load",e,!1),g.addEventListener("error",f,!1)):!g.attachEvent||g.attachEvent.toString&&g.attachEvent.toString().indexOf("[native code")<0||b.opera||(g.onload=e,g.attachEvent("onreadystatechange",e)),g.src=a,h.appendChild(g)},c.ready=function(a){function f(){d=!0,c.forEach(e,function(a){a()}),e=[]}function g(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",g,!1),f()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",g),f())}return d?(setTimeout(a,1),!1):(e.push(a),e.length>1?!1:("complete"===document.readyState&&setTimeout(f,1),document.addEventListener?(document.addEventListener("DOMContentLoaded",g,!1),b.addEventListener("load",f,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",g),b.attachEvent("onload",f)),void 0))},c.require=function(a,b){function d(a){var c=!0;i[a]=!0;for(var d in i)i[d]||(c=!1);!g&&c&&(g=!0,b())}"string"==typeof a&&(a=[a]);var e,f,g=!1,h=a.length,i={};for(e=0;h>e;e++)f=a[e],i[f]=!1,f.indexOf(".css")>-1?c.requireCSS(f,d):c.requireScript(f,d)},c.getUrl=function(a){return a.url+(a.base?"/"+a.base:"/")},c.getConfig=function(){var a=b.ConfigIO||c.queryParams();return a.socket=a.socket===!0||"undefined"==typeof a.socket||"true"===(a.socket||"").toLowerCase(),a.web=a.web===!0||"true"===(a.web||"").toLowerCase(),a.secure=a.secure===!0||"true"===(a.secure||"").toLowerCase(),a},c.isIFrameChild=function(){return b.location!==b.parent.location},c.foundRequireJS=function(){return"undefined"!=typeof b.requirejs},c.foundDefine=function(){return"function"==typeof define&&define.amd},c.getObjectType=function(a){return Object.prototype.toString.apply(a)},c.getFunctionName=function(a){var b;return a&&(b=a.getName instanceof Function?a.getName():a.name,b=b||a.toString().match(/function\s*([_$\w\d]*)/)[1]),b||"anonymous"},c.toArray=function(a){return Array.prototype.slice.call(a)},c.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},c.every=function(){return Array.prototype.every?function(a,b,c){return(a||[]).every(b,c)}:function(a,b,c){a=a||[];var d=0,e=a.length;if(e)do if(!b.call(c||a,a[d],d,a))return!1;while(++d<e);return!0}}(),c.forEach=function(){return Array.prototype.forEach?function(a,b,c){(a||[]).forEach(b,c)}:function(a,b,c){a=a||[];var d=0,e=a.length;if(e)do b.call(c||a,a[d],d,a);while(++d<e)}}(),c.forEachProperty=function(a,b,c){var d;for(d in a)b.call(c||a,a[d],d,a)},c.extend=function(a,b){return c.forEachProperty(b,function(b,c){a[c]=b}),a}}("undefined"!=typeof ConsoleIO?ConsoleIO:module.exports,this),function(a,b){var c=a.storage={},d={};a.util.ready(function(){var a,e,f,g,h=document.cookie.split("; "),i=h.length;for(a=0;i>a;a++)e=h[a].split("="),f=e[0],g=e[1],d[f]=g,b.localStorage&&(b.localStorage.getItem(f)||b.localStorage.setItem(f,g));if(b.localStorage){var j=b.localStorage.getItem("guid"),k=b.localStorage.getItem("deviceName");j&&!d.guid&&c.addItem("guid",j,365,!0),k&&!d.deviceName&&c.addItem("deviceName",k,365,!0)}}),c.addItem=function(a,c,e,f){if(c&&"undefined"!==c){var g="";if(e){var h=new Date;h.setTime(h.getTime()+1e3*60*60*24*e),g="; expires="+h.toGMTString()}document.cookie=a+"="+c+g+"; path=/",d[a]=c,!f&&b.localStorage&&b.localStorage.setItem(a,c)}},c.removeItem=function(a){c.addItem(a,"",-1,!0),delete d[a],b.localStorage&&b.localStorage.removeItem(a)},c.getItem=function(a){return b.localStorage?b.localStorage.getItem(a)||d[a]:d[a]}}("undefined"!=typeof ConsoleIO?ConsoleIO:module.exports,this),function(a){function b(){}a.EventEmitter=b,b.prototype.on=function(b,c){return this.$events||(this.$events={}),this.$events[b]?a.util.isArray(this.$events[b])?this.$events[b].push(c):this.$events[b]=[this.$events[b],c]:this.$events[b]=c,this},b.prototype.addListener=b.prototype.on,b.prototype.once=function(a,b){function c(){d.removeListener(a,c),b.apply(this,arguments)}var d=this;return c.listener=b,this.on(a,c),this},b.prototype.removeListener=function(b,c){if(this.$events&&this.$events[b]){var d=this.$events[b];if(a.util.isArray(d)){for(var e=-1,f=0,g=d.length;g>f;f++)if(d[f]===c||d[f].listener&&d[f].listener===c){e=f;break}if(0>e)return this;d.splice(e,1),d.length||delete this.$events[b]}else(d===c||d.listener&&d.listener===c)&&delete this.$events[b]}return this},b.prototype.removeAllListeners=function(a){return void 0===a?(this.$events={},this):(this.$events&&this.$events[a]&&(this.$events[a]=null),this)},b.prototype.listeners=function(b){return this.$events||(this.$events={}),this.$events[b]||(this.$events[b]=[]),a.util.isArray(this.$events[b])||(this.$events[b]=[this.$events[b]]),this.$events[b]},b.prototype.emit=function(b){if(!this.$events)return!1;var c=this.$events[b];if(!c)return!1;var d=Array.prototype.slice.call(arguments,1);if("function"==typeof c)c.apply(this,d);else{if(!a.util.isArray(c))return!1;for(var e=c.slice(),f=0,g=e.length;g>f;f++)e[f].apply(this,d)}return!0}}("undefined"!=typeof ConsoleIO?ConsoleIO:module.exports,this),function(a){var b=a.stringify={};b.objects=["[object Arguments]","[object Array]","[object String]","[object Number]","[object Boolean]","[object Function]","[object Object]","[object Geoposition]","[object Coordinates]","[object CRuntimeObject]"],b.events=["[object Event]","[object KeyboardEvent]","[object MouseEvent]","[object TouchEvent]","[object WheelEvent]","[object UIEvent]","[object CustomEvent]","[object NotifyAudioAvailableEvent]","[object CompositionEvent]","[object CloseEvent]","[object MessageEvent]","[object MessageEvent]"],b.errors=["[object Error]","[object ErrorEvent]","[object DOMException]","[object PositionError]"],b.parse=function(c,d,e){var f="",g=a.util.getObjectType(c);if(e="undefined"==typeof e?!0:e,d=d||1,b.objects.indexOf(g)>-1||b.events.indexOf(g)>-1||b.errors.indexOf(g)>-1)switch(g){case"[object Error]":case"[object ErrorEvent]":c=c.message;case"[object String]":f=b.parseString(c);break;case"[object Arguments]":c=a.util.toArray(c);case"[object Array]":f=b.parseArray(c,d);break;case"[object Number]":f=String(c);break;case"[object Boolean]":f=c?"true":"false";break;case"[object Function]":f='"'+a.util.getFunctionName(c)+'"';break;default:f=b.parseObject(g,c,d)}else if(null===c)f='"null"';else if(void 0===c)f='"undefined"';else if(e)f=b.parseObject(g,c,d);else try{f=String(c)}catch(h){a.console.error(h)}return f},b.valueOf=function(c,d,e){var f=a.util.getObjectType(c);return(b.objects.indexOf(f)>-1||b.events.indexOf(f)>-1||b.errors.indexOf(f)>-1)&&!d?this.parse(c,e):("[object Function]"===f?f="[Function "+a.util.getFunctionName(c)+"]":c&&c.constructor&&c.constructor.name&&(f="[object "+c.constructor.name+"]"),f)},b.parseString=function(a){return'"'+a.replace(/"/g,"'").replace(/</g,"&lt;").replace(/>/g,"&gt;")+'"'},b.parseArray=function(c,d){var e=[];return a.util.forEach(c,function(a,c){this[c]=b.valueOf(a,!1,d)},e),e.length>0?"[ "+e.join(", ")+" ]":"[ "+c.toString()+" ]"},b.parseObject=function(c,d,e){var f="",g="[object global]"===c,h=new Array(e).join("	"),i=new Array(++e).join("	"),j=[];return d&&d.constructor&&(f=d.constructor.name),a.util.forEachProperty(d,function(a,c){this.push(i+'"'+c+'": '+b.valueOf(a,g,e))},j),j.length>0?(f||c)+": {\n"+j.join(",\n")+"\n"+h+"}":d.toString()+"\n"}}("undefined"!=typeof ConsoleIO?ConsoleIO:module.exports,this),function(a){function b(a){for(var c=[],d=Array.prototype.slice,e=0;e<a.length;++e){var f=a[e];void 0===f?c[e]="undefined":null===f?c[e]="null":f.constructor&&(f.constructor===Array?c[e]=f.length<3?"["+b(f)+"]":"["+b(d.call(f,0,1))+"..."+b(d.call(f,-1))+"]":f.constructor===Object?c[e]="#object":f.constructor===Function?c[e]="#function":f.constructor===String?c[e]='"'+f+'"':f.constructor===Number&&(c[e]=f))}return c.join(",")}var c=a.formatter={};c.chrome=function(a){var b=(a.stack+"\n").replace(/^\S[^\(]+?[\n$]/gm,"").replace(/^\s+(at eval )?at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}()@$1$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}()@$1").split("\n");return b.pop(),b},c.safari=function(a){return a.stack.replace(/\[native code\]\n/m,"").replace(/^(?=\w+Error\:).*$\n/m,"").replace(/^@/gm,"{anonymous}()@").split("\n")},c.ie=function(a){var b=/^.*at (\w+) \(([^\)]+)\)$/gm;return a.stack.replace(/at Anonymous function /gm,"{anonymous}()@").replace(/^(?=\w+Error\:).*$\n/m,"").replace(b,"$1@$2").split("\n")},c.firefox=function(a){return a.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^[\(@]/gm,"{anonymous}()@").split("\n")},c.opera11=function(a){for(var b="{anonymous}",c=/^.*line (\d+), column (\d+)(?: in (.+))? in (\S+):$/,d=a.stacktrace.split("\n"),e=[],f=0,g=d.length;g>f;f+=2){var h=c.exec(d[f]);if(h){var i=h[4]+":"+h[1]+":"+h[2],j=h[3]||"global code";j=j.replace(/<anonymous function: (\S+)>/,"$1").replace(/<anonymous function>/,b),e.push(j+"@"+i+" -- "+d[f+1].replace(/^\s+/,""))}}return e},c.opera10b=function(a){for(var b=/^(.*)@(.+):(\d+)$/,c=a.stacktrace.split("\n"),d=[],e=0,f=c.length;f>e;e++){var g=b.exec(c[e]);if(g){var h=g[1]?g[1]+"()":"global code";d.push(h+"@"+g[2]+":"+g[3])}}return d},c.opera10a=function(a){for(var b="{anonymous}",c=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,d=a.stacktrace.split("\n"),e=[],f=0,g=d.length;g>f;f+=2){var h=c.exec(d[f]);if(h){var i=h[3]||b;e.push(i+"()@"+h[2]+":"+h[1]+" -- "+d[f+1].replace(/^\s+/,""))}}return e},c.opera9=function(a){for(var b="{anonymous}",c=/Line (\d+).*script (?:in )?(\S+)/i,d=a.message.split("\n"),e=[],f=2,g=d.length;g>f;f+=2){var h=c.exec(d[f]);h&&e.push(b+"()@"+h[2]+":"+h[1]+" -- "+d[f+1].replace(/^\s+/,""))}return e},c.other=function(a){for(var c,d,e="{anonymous}",f=/function\s*([\w\-$]+)?\s*\(/i,g=[],h=10;a&&a.arguments&&g.length<h;)c=f.test(a.toString())?RegExp.$1||e:e,d=Array.prototype.slice.call(a.arguments||[]),g[g.length]=c+"("+b(d)+")",a=a.caller;return g}}("undefined"!=typeof ConsoleIO?ConsoleIO:module.exports,this),function(a){function b(){try{void 0()}catch(a){return a}}function c(b){return b.arguments&&b.stack?a.formatter.chrome:b.stack&&b.sourceURL?a.formatter.safari:b.stack&&b.number?a.formatter.ie:"string"==typeof b.message&&"undefined"!=typeof window&&window.opera?b.stacktrace?b.message.indexOf("\n")>-1&&b.message.split("\n").length>b.stacktrace.split("\n").length?a.formatter.opera9:b.stack?b.stacktrace.indexOf("called from line")<0?a.formatter.opera10b:a.formatter.opera11:a.formatter.opera10a:a.formatter.opera9:b.stack?a.formatter.firefox:"other"}var d=a.stacktrace={};d.allowedErrorStackLookUp=["[object Error]","[object ErrorEvent]","[object DOMException]","[object PositionError]"],d.get=function(e){e=e||b();var f=c(e);if("function"==typeof f)return f(e);var g=a.util.getObjectType(e);return-1===d.allowedErrorStackLookUp.indexOf(g)?g+' is missing from "stacktrace.allowedErrorStackLookUp['+d.allowedErrorStackLookUp.join(",")+']";':a.formatter.other(arguments.callee)}}("undefined"!=typeof ConsoleIO?ConsoleIO:module.exports,this),function(a,b){function c(a){var b=a.data;l.emit(b.event,{type:b.type,message:b.message,stack:b.stack})}function d(){var c=b.navigator;a.console.log("Connected to the Server"),l.emit("setUp",{guid:a.guid,deviceName:a.name,userAgent:c.userAgent,appVersion:c.appVersion,vendor:c.vendor,platform:c.platform,opera:!!b.opera,params:a.config}),l.forceReconnect()}function e(b){l.connectionMode=b,a.console.log("Connecting to the Server")}function f(b,c){l.connectionMode=b,l.subscribed=!0,l.clearPendingQueue(),a.console.log("Reconnected to the Server after "+c+" attempts."),l.forceReconnect()}function g(){a.console.log("Reconnecting to the Server")}function h(){a.console.log("Disconnected from the Server")}function i(){a.console.warn("Failed to connect to the Server")}function j(){a.console.warn("Failed to reconnect to the Server")}function k(){a.console.warn("Socket Error")}var l=a.transport={},m=null,n=[];l.connectionMode="",l.subscribed=!1,l.setUp=function(){a.guid=a.storage.getItem("guid"),a.name=a.storage.getItem("deviceName"),function(a){var b=a.Transport["jsonp-polling"].prototype.post;a.Transport["jsonp-polling"].prototype.requestQueue=[],a.Transport["jsonp-polling"].prototype.isProcessingQueue=!1,a.Transport["jsonp-polling"].prototype.hasOutstandingRequests=!1,a.Transport["jsonp-polling"].prototype.postRequest=function(){var a=this;this.isProcessingQueue=!0,setTimeout(function(){b.call(a,a.requestQueue.shift())},10)},a.Transport["jsonp-polling"].prototype.completePostRequest=function(){var a=this;setTimeout(function(){a.socket.setBuffer(!1),a.hasOutstandingRequests=a.requestQueue.length>0,a.isProcessingQueue=!1,a.processPendingRequests()},250)},a.Transport["jsonp-polling"].prototype.processPendingRequests=function(){this.hasOutstandingRequests&&!this.isProcessingQueue&&(this.postRequest(),this.completePostRequest())},a.Transport["jsonp-polling"].prototype.post=function(a){this.requestQueue.push(a),this.hasOutstandingRequests=!0,this.processPendingRequests()}}(b.io),l.io=a.io.connect(a.config.url,{secure:a.config.secure,resource:(a.config.base||"")+"socket.io"}),a.console.on("console",function(a){l.emit("console",{type:a.type,message:escape(a.message),stack:a.stack})}),b.addEventListener?b.addEventListener("message",c,!1):b.attachEvent&&b.attachEvent("onmessage",c),l.io.on("connect",d),l.io.on("connecting",e),l.io.on("reconnect",f),l.io.on("reconnecting",g),l.io.on("disconnect",h),l.io.on("connect_failed",i),l.io.on("reconnect_failed",j),l.io.on("error",k)},l.emit=function(a,b){return l.isConnected()?(l.io.emit("device:"+a,b),!0):(n.push({name:a,data:b}),!1)},l.on=function(a,b,c){l.io&&l.io.on(a,function(){b.apply(c||this,arguments)})},l.isConnected=function(){return l.io&&l.io.socket?l.io.socket.connected:!1},l.forceReconnect=function(){return!a.config.forceReconnection||m?!1:(m=b.setInterval(function(){var c=l.isConnected();(!c||c&&!l.subscribed)&&(a.console.log("forceReconnect reconnecting",a.name),l.io.socket.disconnectSync(),l.io.socket.reconnect(),b.clearInterval(m),m=null)},a.config.forceReconnectInterval),void 0)},l.clearPendingQueue=function(){var b=[];a.util.forEach(n,function(a){var c=l.emit(a.name,a.data);c||b.push(a)}),n=b}}("undefined"!=typeof ConsoleIO?ConsoleIO:module.exports,this),function(a,b){function c(b,c,g,h){e&&a.config.nativeConsole&&e[b]&&(f.indexOf(b)>-1?e[b](c):e[b].apply(e,c)),c&&c.hasOwnProperty("length")&&c.length>0&&(c=a.util.toArray(c)),d.emit("console",{type:b,message:g||a.stringify.parse(c),stack:h?a.stringify.parse(h):""})}var d=a.console=new a.EventEmitter,e=b.console,f=["dir","dirxml"],g={},h={};d.profiles=[],d.assert=function(b){if(b)c("assert",arguments);else{var d=["Assertion failed:"];d=d.concat(a.util.toArray(arguments).slice(1)),c("assert",arguments,a.stringify.parse(d),a.stacktrace.get())}},d.count=function(a){var b=a||"_GLOBAL_",d=g[b];d?++d.count:g[b]=d={key:a||"",count:1},c("count",arguments,(a||"")+": "+d.count)},d.time=function(a,b){if(!a)return!1;var d="KEY"+a.toString();return!b&&h[d]?!1:(h[d]=(new Date).getTime(),c("time",arguments),void 0)},d.timeEnd=function(a){if(!a)return!1;var b="KEY"+a.toString(),d=h[b];d&&(delete h[b],c("timeEnd",arguments,a+": "+((new Date).getTime()-d)+"ms"))},d.debug=function(){c("debug",arguments)},d.warn=function(){c("warn",arguments)},d.info=function(){c("info",arguments)},d.log=function(){c("log",arguments)},d.dir=function(a){c("dir",a)},d.dirxml=function(b){var d,e=b.nodeType;9===e&&(b=b.documentElement),d=b?b.outerHTML||b.innerHTML||b.toString()||a.stringify.parse(b):null,d&&(d=d.replace(/</gim,"&lt;"),d=d.replace(/>/gim,"&gt;")),c("dirxml",b,d)},d.group=function(){c("group",arguments)},d.groupCollapsed=function(){c("groupCollapsed",arguments)},d.groupEnd=function(){c("groupEnd")},d.markTimeline=function(){c("markTimeline",arguments)},d.timeStamp=function(){c("timeStamp",arguments)},d.profile=function(){c("profile",arguments)},d.profileEnd=function(){c("profileEnd",arguments)},d.error=function(b){c("error",arguments,null,a.stacktrace.get(b))},d.exception=function(){c("error",arguments)},d.trace=function(){c("trace",arguments,null,a.stacktrace.get())},d.clear=function(){g={},h={},c("clear",arguments)},d.command=function(){c("command",arguments)},b.console=d}("undefined"!=typeof ConsoleIO?ConsoleIO:module.exports,this),function(a,b){function c(a){var b="console-content",c="device-style";if(!document.getElementById(c)){var d="."+b+"::after { content: 'Console.IO:"+a+"'; position: fixed; top: 0px; left: 0px; padding: 2px 8px; "+"font-size: 12px; font-weight: bold; color: rgb(111, 114, 117); "+"background-color: rgba(192, 192, 192, 0.5); border: 1px solid rgb(111, 114, 117); "+"font-family: Monaco,Menlo,Consolas,'Courier New',monospace; };",e=document.getElementsByTagName("head")[0],f=document.createElement("style");f.type="text/css",f.id=c,f.styleSheet?f.styleSheet.cssText=d:f.appendChild(document.createTextNode(d)),e.appendChild(f)}(document.body.firstElementChild||document.body.firstChild).setAttribute("class",b)}function d(b){a.guid||(a.guid=b.guid,a.storage.addItem("guid",b.guid,365)),a.name||(a.name=b.name,a.storage.addItem("deviceName",b.name,365)),c(a.name+"|"+a.guid)}function e(){Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e})}function f(){var b=[],c=new RegExp("((http|https)://)?([^/]+)","img");return a.util.forEach(a.util.toArray(document.styleSheets),function(d){try{var e=d.cssRules||d.rules,f=d.href.match(c);f.pop(),e&&a.util.forEach(a.util.toArray(e),function(a){var c=a.cssText,d=f.concat();c&&(c.indexOf("../")>-1&&(d.pop(),c=c.replace("..",d.join("/"))),b.push(c))})}catch(g){}}),b.join(" ")}function g(b,c){return b=b||document.body,c=c||b.cloneNode(!0),a.util.forEach(a.util.toArray(b.children),function(a,b){g(a,c.children[b])}),c.setAttribute("style","none"!==b.style.display?h(b):"display:none;"),c}function h(c){var d=document.defaultView||b,e=[];if(d.getComputedStyle){var f=d.getComputedStyle(c,"");a.util.forEach(a.util.toArray(f),function(a){e.push(a+":"+f.getPropertyValue(a))})}else c.currentStyle?a.util.forEachProperty(c.currentStyle,function(a,b){e.push(b+":"+a)}):a.util.forEach(a.util.toArray(c.style),function(a){e.push(a+":"+c.style[a])});return e.join("; ")}function i(b){var c={More:[]},d=["[object Arguments]","[object Array]","[object String]","[object Number]","[object Boolean]","[object Error]","[object ErrorEvent]","[object Object]"];return a.util.forEachProperty(b,function(b,e){d.indexOf(a.util.getObjectType(b))>-1?c[e]=a.stringify.parse(b):c.More.push(e)}),c}function j(){var a;if(b.XMLHttpRequest){a=new XMLHttpRequest;try{a.withCredentials=!1}catch(c){}}else b.XDomainRequest?a=new XDomainRequest:b.ActiveXObject&&(a=new ActiveXObject("Microsoft.XMLHTTP"));return a}function k(b){d(b),a.console.log("Ready",a.name),a.transport.forceReconnect()}function l(b){d(b),b.guid===a.guid&&(a.transport.subscribed=!0,a.transport.clearPendingQueue(),a.console.log("Online",a.name)),a.transport.forceReconnect()}function m(b){d(b),b.guid===a.guid&&(a.console.log("Offline",a.name),a.transport.subscribed=!1)}function n(b){b.name||a.storage.removeItem("deviceName"),a.name=b.name,a.storage.addItem("deviceName",a.name,365),document.getElementById("device-style").parentNode.removeChild(document.getElementById("device-style")),c(a.name+"|"+a.guid)}function o(){a.transport.emit("status",{connection:{mode:a.transport.connectionMode},document:{cookie:document.cookie},navigator:i(b.navigator),location:i(b.location),screen:i(b.screen)})}function p(b){var c=j();c?(c.open("GET",b.url,!0),c.onreadystatechange=function(){if(4===c.readyState){var d;d=200===c.status?c.responseText:c.statusText,a.transport.emit("source",{url:b.url,content:d})}},c.onerror=function(){a.transport.emit("source",{url:b.url,content:"XMLHttpRequest Error: Possibally Access-Control-Allow-Origin security issue."})},c.send(null)):a.transport.emit("source",{url:b.url,content:"XMLHttpRequest request not supported by the browser."})}function q(){a.console.log("executing reload command"),b.setTimeout(function(a){return function(){b.location.reload?b.location.reload(!0):b.location.assign(a)}}(location.href),500)}function r(){var b,c=document.getElementById("console-log");c&&(b=c.parentNode,b.removeChild(c)),a.transport.emit("content",{content:document.documentElement.innerHTML}),c&&b.appendChild(c)}function s(){var b,c,d=document.getElementById("console-log");d&&(b=d.parentNode,b.removeChild(d)),c='<html><head><style type="text/css">'+f()+"</style></head>"+g().outerHTML+"</html>",a.transport.emit("previewContent",{content:c}),d&&b.appendChild(d)}function t(){e();var c=a.util.getUrl(a.config);a.util.requireScript(c+a.config.html2canvas,function(){var d,e=document.getElementById("console-log");e&&(d=e.parentNode,d.removeChild(e)),b.html2canvas(document.body,{completed:!1,logging:!0,useCORS:!0,proxy:c+"proxy",onrendered:function(b){if(!this.completed)try{this.completed=!0,a.transport.emit("screenShot",{screen:b.toDataURL()})}catch(c){a.transport.emit("screenShot",{screen:!1}),a.console.exception(c)}e&&d.appendChild(e)}})})}function u(){var c=[],d=[],e=b.location.origin||b.location.href.replace(b.location.pathname,"");a.util.forEach(a.util.toArray(document.scripts),function(a){a.src&&c.push(a.src.replace(e,""))}),c.length>0&&a.transport.emit("files",{type:"javascript",files:c}),a.util.forEach(a.util.toArray(document.getElementsByTagName("link")),function(a){a.href&&d.push(a.href.replace(e,""))}),d.length>0&&a.transport.emit("files",{type:"style",files:d})}function v(b){a.console.log("executing script");var c,d;try{c=new Function([],"return "+b),d=c(),d&&a.console.command(d)}catch(e){a.console.error(e,c&&c.toString?c.toString():void 0)}}var w=a.client={};w.setUp=function(){a.transport.on("device:ready",k),a.transport.on("device:online",l),a.transport.on("device:offline",m),a.transport.on("device:command",v),a.transport.on("device:fileList",u),a.transport.on("device:htmlContent",r),a.transport.on("device:fileSource",p),a.transport.on("device:previewHTML",s),a.transport.on("device:captureScreen",t),a.transport.on("device:status",o),a.transport.on("device:reload",q),a.transport.on("device:name",n)}}("undefined"!=typeof ConsoleIO?ConsoleIO:module.exports,this),function(a,b){function c(c){a.io=c||b.io,a.transport.setUp(),a.client.setUp()}a.version="0.0.15",a.guid="",a.name="",a.config={url:"",base:"/",html2canvas:"addons/html2canvas.js","socket.io":"socket.io/socket.io.js",forceReconnection:!0,forceReconnectInterval:5e3,nativeConsole:!0,webOnly:!1,docked:!1,position:"bottom",height:"300px",width:"99%"},a.debug=function(a){var b,c=document.getElementById("log");!c&&document.body&&(c=document.createElement("ul"),c.setAttribute("id","log"),document.body.insertBefore(c,document.body.firstElementChild||document.body.firstChild)),c&&(b=document.createElement("li"),b.innerHTML=a,c.insertBefore(b,c.firstElementChild||c.firstChild))};var d=b.onerror;b.onerror=function(b,c,e){var f=!1;return d&&(f=d(b,c,e)),a.transport.isConnected()?a.transport.emit("console",{type:"error",message:b+";\nfileName: "+c+";\nlineNo: "+e}):a.util.isIFrameChild()?a.console.exception(b+";\nfileName: "+c+";\nlineNo: "+e):a.debug([b,c,e].join("; ")),f},a.util.foundRequireJS()&&(b.requirejs.onError=function(b){a.console.error(b,b.requireModules,b.originalError)}),b.navigator.userAgent.search(/Maple/i)>-1&&(b.alert=b.console.info,"function"==typeof HTMLElement.prototype.addEventListener&&"function"==typeof HTMLElement.prototype.attachEvent&&(HTMLElement.prototype.attachEvent=void 0)),Function.prototype.bind&&b.console&&"object"==typeof b.console.log&&a.util.forEach(["log","info","warn","error","assert","dir","clear","profile","profileEnd"],function(a){b.console[a]=this.bind(b.console[a],b.console)},Function.prototype.call),a.util.isIFrameChild()&&b.parent.postMessage&&a.console.on("console",function(a){b.parent.postMessage({event:"console",type:a.type,message:escape(a.message),stack:a.stack},"*")}),a.util.ready(function(){a.util.extend(a.config,a.util.getConfig()),a.config.webOnly||a.util.isIFrameChild()||(a.util.foundRequireJS()?b.require(["socket.io"],c):a.util.require(a.util.getUrl(a.config)+a.config["socket.io"],c))})}("undefined"!=typeof ConsoleIO?ConsoleIO:module.exports,this),"function"==typeof define&&define.amd&&define([],function(){return ConsoleIO})}();